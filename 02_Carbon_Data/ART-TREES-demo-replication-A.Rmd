---
title: "ART TREES - TMR Replication Demonstration"
author: "GHG Program Team"
date: "2025-08-08"
output:
  html_document:
    toc: yes
    theme: united
    keep_md: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### **1. Introduction: The Goal of This Exercise**

This R Markdown file demonstrates **perfect reproducibility** in environmental
data analysis, a fundamental principle for any credible scientific or audit
process.

**The Challenge**: An independent reviewer must be able to take your data and
your code, run it in a documented environment, and get the exact same result you
reported.

This script performs a straightforward calculation of total carbon stock from
forest inventory data using publicly available methodologies.

**Your task**: Run this script and verify that you get the expected result of
**1,550 tCO₂e**. This demonstrates that: - Your computational environment is
properly configured - The analysis is transparent and reproducible - The
methodology can be independently verified

**Key Principles Demonstrated**: - **Data Traceability**: Every calculation step
is documented - **Reproducibility**: Results are identical across different
users and systems - **Transparency**: Methods are open and verifiable

--------------------------------------------------------------------------------

### **2. Loading Required Packages**

This step loads the `dplyr` package for data manipulation. In practice, all
package versions should be documented (see runtime log at the end of this
script) to ensure computational reproducibility.

```{r packages, message=FALSE, warning=FALSE}
# Load required packages for data manipulation
library(dplyr)

# Verify package is loaded
cat("dplyr package loaded successfully\n")
```

--------------------------------------------------------------------------------

### **3. Creating the Dataset**

We use a standardized dataset that represents typical forest inventory
measurements. This approach ensures the exercise works consistently across
different environments without requiring external file dependencies.

**Data Source**: Simulated forest plot measurements following standard forestry
protocols.

```{r data}
# Create standardized forest inventory dataset
# Each row represents one forest measurement plot
carbon_data <- data.frame(
  plot_id = c("PLOT_001", "PLOT_002", "PLOT_003", "PLOT_004", "PLOT_005"),
  carbon_stock_tCO2e = c(310, 290, 350, 275, 325),
  forest_type = c("Primary", "Secondary", "Primary", "Secondary", "Primary"),
  measurement_year = c(2024, 2024, 2024, 2024, 2024)
)

# Display the input data
cat("Forest Inventory Data:\n")
print(carbon_data)
cat("\nDataset contains", nrow(carbon_data), "measurement plots\n")
```

--------------------------------------------------------------------------------

### **4. Data Quality Verification**

Before performing calculations, we verify data integrity - a critical step in
any reproducible analysis.

```{r data_verification}
# Check for missing values
missing_values <- sum(is.na(carbon_data$carbon_stock_tCO2e))
cat("Missing values in carbon stock data:", missing_values, "\n")

# Verify data types
cat("Data structure verification:\n")
str(carbon_data)

# Summary statistics
cat("\nCarbon stock summary statistics:\n")
summary(carbon_data$carbon_stock_tCO2e)
```

--------------------------------------------------------------------------------
### **5. Carbon Stock Calculation**

This is the core analytical step. We calculate total carbon stock using a simple, transparent aggregation method that can be easily verified by independent reviewers.

**Methodology**: Sum all individual plot measurements to get total carbon stock across the study area.

```{r calculation}
# Calculate total carbon stock using simple aggregation
calculation_summary %>%
  summarise(
    total_plots = n(),
    total_carbon_tCO2e = sum(carbon_stock_tCO2e),
    mean_carbon_per_plot = round(mean(carbon_stock_tCO2e), 1)
  )

# Extract the key result
final_total_carbon <- calculation_summary$total_carbon_tCO2e

# Display calculation details
cat("Calculation Summary:\n")
cat("- Number of plots:", calculation_summary$total_plots, "\n")
cat("- Mean carbon per plot:", calculation_summary$mean_carbon_per_plot, "tCO₂e\n")
cat("- Total carbon stock:", final_total_carbon, "tCO₂e\n")
```

--------------------------------------------------------------------------------

### **6. Result Verification**

This section presents the final result in a clear format for verification purposes.

```{r results}
# Display final result prominently
cat("=====================================\n")
cat("       REPRODUCIBILITY CHECK\n")
cat("=====================================\n")
cat("TOTAL CARBON STOCK:", final_total_carbon, "tCO₂e\n")
cat("=====================================\n")

# Verification check
expected_result <- 1550
if (final_total_carbon == expected_result) {
  cat("\n✓ SUCCESS: Result matches expected value!\n")
  cat("✓ Reproducibility confirmed\n")
} else {
  cat("\n✗ WARNING: Result does not match expected value\n")
  cat("Expected:", expected_result, "tCO₂e\n")
  cat("Calculated:", final_total_carbon, "tCO₂e\n")
  cat("Difference:", abs(final_total_carbon - expected_result), "tCO₂e\n")
}
```

--------------------------------------------------------------------------------

### **7. Runtime Environment Documentation**

Documenting the computational environment is essential for reproducibility. This information allows others to recreate the exact same analytical conditions.

```{r session_info}
# Document the computational environment
cat("Runtime Environment Information:\n")
cat("================================\n")
sessionInfo()
```

--------------------------------------------------------------------------------

### **8. Exercise Completion**

**Congratulations!** If you see "SUCCESS" above, you have:

1. **Demonstrated reproducibility**: Your result matches the expected value
2. **Verified data integrity**: The calculation process is transparent
3. **Documented your environment**: Future users can replicate your setup
4. **Applied best practices**: Your analysis follows scientific standards

**Next Steps**:
- Save this completed script with your results
- Compare your runtime environment with others in your training group
- Practice with your own datasets using this same approach

**Key Takeaways**:
- Reproducible analysis requires careful documentation
- Simple, transparent methods are more reliable than complex ones
- Environmental documentation is as important as the analysis itself
- Version control systems like Git help maintain analytical integrity

This exercise forms the foundation for conducting credible, verifiable environmental analyses that can withstand independent review.











```{r session_info}
# Document the computational environment
cat("Runtime Environment Information:\n")
cat("================================\n")
sessionInfo()
```
